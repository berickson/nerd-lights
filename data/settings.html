<html>
    <head>
        <title id="head_title">Nerd Lights Settings</title>
        <link rel="stylesheet" href="styles.css">
        <link rel="icon" type="image/png" href="favicon.png">
        <link rel="apple-touch-icon" sizes="128x128" href="niceicon.png">
        <link rel="icon" sizes="192x192" href="vector-icon.svg">
        <script src="index.js"></script>
    </head>
<body> 
<script>
    function on_status_result(e) {
        let status = JSON.parse(e.target.response);
        document.getElementById("device_name_input").value = status.device_name;
        document.getElementById("led_count_select").value = status.led_count;
    }

    function update_settings() {
        let name = document.getElementById("device_name_input").value;
        if(!isAlphaNumeric(name)) {
            alert("name can only have letters and numbers");
            return;
        }
        if(name.length>10) {
            alert("name too long");
            return;
        }
        if(name.length==0) {
            alert("name too short");
        }
        let ledcount = document.getElementById("led_count_select").value;
        command("ledcount "+ledcount);
        command("name "+name);
    }

    command("status", on_status_result);

</script>

<h1> <div id="page_title">Settings</div></h1>
<style>
.form {
    display: grid;
    grid-template-columns: 10em 10em;
    grid-gap: 16px;
}

.form label {
    text-align: right;
    grid-column: 1 / 2;
}

.form input,.form select, .form button {
    grid-column: 2 / 3;
}

   

.form input, .form select, .form select {
    /* font-family: Arial, Helvetica, sans-serif; */
    font-size: larger;
    border-top:none;
    border-left:none;
    border-right:none;
    border-color:gray;
    border-width:2px;
    color:lightgray;
    background-color: rgba(0,0,0,0);
}



</style>
<div class='form'>
        <label for="device_name_input">Device Name</label>
        <input id="device_name_input"/>
    <label for="led_count_select">Number of Lights</label>

    <select id="led_count_select">
        <option value="50">50</option>
        <option value="100">100</option>
        <option value="150">150</option>
        <option value="200">200</option>
        <option value="250">250</option>
        <option value="300">300</option>
        <option value="350">350</option>
        <option value="400">400</option>
        <option value="450">450</option>
        <option value="500">500</option>
        <option value="550">550</option>
        <option value="600">600</option>
        <option value="650">650</option>
        <option value="700">700</option>
        <option value="750">750</option>
        <option value="800">800</option>
        <option value="850">850</option>
        <option value="900">900</option>
        <option value="950">950</option>
        <option value="1000">1000</option>
    </select>
    <!-- <label for="power_supply_voltage_input">Power Supply</label>
    <select id="power_supply_voltage_input">
        <option value="5">USB / 5V</option>
        <option value="12">Wall Adapter / 12 Volt</option>
    </select>
    <label for="max_current_input">Max Current (mA)</label>
    <input id="max_current_input"/> -->
    <button onclick="update_settings()">Update Settings</button>
</div>
<h1> Restart and Update</h1>

</div>
    <div>
        <button id="restart_button">Restart</button>
        <button id="system_update_button">System Update</button>
    </div>
<h1> Advanced</h1>
    <a href='command_line.html'>Command Line</a>

<script>
    // Add event listeners after DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('restart_button').addEventListener('click', function() {
            command('restart');
        });
        
        document.getElementById('system_update_button').addEventListener('click', function() {
            command('do_firmware_upgrade');
        });
    });
</script>

    
</div>
</body>
</html>
