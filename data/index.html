<html>
    <head>
        <title id="head_title">Nerd Lights</title>
        <link rel="stylesheet" href="styles.css">
        <link rel="icon" type="image/png" href="favicon.png">
        <link rel="apple-touch-icon" sizes="128x128" href="niceicon.png">
        <link rel="icon" sizes="192x192" href="vector-icon.svg">
    </head>
    <body style='user-select: none;'>
        <template id="color-button">
            <span class = "color-button" style='display:inline-block;text-align:center;'>
            <svg  width="80" height="80">
                <rect id="color-box" x=5% y=5% width="90%" height="90%" rx=15% style="fill:rgb(0,0,0);stroke:rgb(150,150,150)" />
            </svg>
            <br>
            <span class="small" id='label'></span>
            </span>
        </template>
        <!-- 
            see https://iro.js.org/colorPicker_api.html 
        -->
        <script src="iro-5-3-1-min.js"></script>

        <script src="index.js"></script> 

        <h1> <span id="page_title">Nerd Lights</span>        <span style='float:right'>
            <a href="settings.html">settings</a>
        </span>
</h1>
        <div id="devices_div"></div>
        
        <div>
        <button id="on_button" onmousedown="power_on()">on</button> <button id="off_button" onmousedown="power_off()">off</button> 
        </div>


        <h2>Effects</h2>
        <button id="normal_button" onmousedown="command('normal', update_status)">normal</button>
        <button id="gradient_button" onmousedown="command('gradient', update_status)">gradient</button>
        <button id="meteor_button" onmousedown="command('meteor', update_status)">meteor</button>
        <button id="rainbow_button" onmousedown="command('rainbow', update_status)">rainbow</button>
        <button id="twinkle_button" onmousedown="command('twinkle', update_status)">twinkle</button>
        <button id="pattern1_button" onmousedown="command('pattern1', update_status)">pattern1</button>
        <button id="explosion_button" onmousedown="command('explosion', update_status)">explosion</button>
        <button id="stripes_button" onmousedown="command('stripes', update_status)">stripes</button>
        <button id="strobe_button" onmousedown="command('strobe', update_status)">strobe</button>
        <button id="flicker_button" onmousedown="command('flicker', update_status)">flicker</button>

        <h2>Presets</h2>
        <button onmousedown="multi_command(['color 30 0 0','add 200 0 0','add 200 15 0','add 100 15 0','add 200 40 0','twinkle'])">embers</button>
        <button onmousedown="multi_command(['color 5 5 30','add 0 0 255','add 0 0 255','add 100 100 100','twinkle'])">icy</button>
        <button onmousedown="multi_command(['color 0 0 0','add 255 255 0','twinkle'])">fireflies</button>
        <button onmousedown="multi_command(['color 255 0 0','add 255 191 0','add 255 191 0','flicker'])">candle</button>
        <button onmousedown="command('set_program {&quot;light_mode&quot;:0,&quot;brightness&quot;:222,&quot;saturation&quot;:255,&quot;cycles&quot;:1,&quot;speed&quot;:0,&quot;colors&quot;:[{&quot;r&quot;:36,&quot;g&quot;:24,&quot;b&quot;:0},{&quot;r&quot;:191,&quot;g&quot;:159,&quot;b&quot;:0},{&quot;r&quot;:19,&quot;g&quot;:19,&quot;b&quot;:223},{&quot;r&quot;:255,&quot;g&quot;:64,&quot;b&quot;:0},{&quot;r&quot;:19,&quot;g&quot;:255,&quot;b&quot;:19},{&quot;r&quot;:255,&quot;g&quot;:0,&quot;b&quot;:0},{&quot;r&quot;:255,&quot;g&quot;:138,&quot;b&quot;:34}]}', update_status)">pop</button>

        

        <h2>Current Colors</h2>
        <div id="current-colors"></div>

        <div id="picker-modal-dialog" class="modal">
            <div class=modal-content>
                <div class="modal-header">
                <!--<span class="close">&times;</span>-->
                <!--<h2>Modal Header</h2>-->
                </div>
                <div class="modal-body">
                    <div id="color-picker"></div>
                </div>
                <!--
                <div class="modal-footer">
                <h3>Modal Footer</h3>
                </div>
                -->
            </div>
          </div>
        </div>


        <h2>Colors</h2>
        <color-button r="255" g="138" b="34" method="add" name="warm"/>
        <color-button r="255" g="255" b="255" method="add" name="snow"/>
        <color-button r="255" g="0" b="0"   method="add" name="red"/>
        <color-button r="255" g="85" b="85" method="add" name="pink"/>
        <color-button r="0" g="255" b="0"   method="add" name="green"/>
        <color-button r="0" g="0" b="255"   method="add" name="blue"/>
        <color-button r="255" g="0" b="255"  method="add" name="purple"/>
        <color-button r="255" g="191" b="0"  method="add" name="yellow"/>
        <color-button r="0" g="255" b="255"  method="add" name="teal"/>
        <color-button r="0" g="0" b="0"    method="add" name="black"/>
        <h2>Color Schemes</h2>
        <button onmousedown="multi_command(['color 0 255 109','add 0 200 163'])">aqua</button>
        <button onmousedown="multi_command(['color 255 0 0','add 153 51 51'])">vday</button>
        <button onmousedown="multi_command(['color 255 13 0','add 191 159 0','add 19 19 223','add 255 64 0','add 19 255 19'])">match</button>
        <button onmousedown="multi_command(['color 171 31 0','add 186 74 0','add 163 80 12'])">tday</button>
        <button onmousedown="multi_command(['color 255 0 0','add 255 81 0','add 255 255 0','add 0 255 4','add 0 0 255','add 111 0 255','add 255 0 132'])">roygbiv</button>

        <h2>Tweaks</h2>
        <div class = 'tweaks'>
        <table>
            <tr>
               <td><div class='medium'>brightness:</div></td>  
               <td width='99%'><div> <input id='brightness' class='slider' type='range' min="0" max="255" oninput="brightness_input()" onchange="brightness_change()"></input></div></td>
               <td><div class='medium' id='brightness_value'></div></td>
            </tr>
            <tr>
               <td><div class='medium'>speed:</div></td>
               <td><div><input id='speed' class='slider' type='range' min="0" max="100" oninput="speed_input()" onchange="speed_change()"></input></div></td>
               <td><div class='medium' id='speed_value'></div></td>
            </tr>
            <tr>
                <td><div class='medium'>saturation:</div></td>
                <td><div> <input id='saturation' class='slider' type='range' min="0" max="255" oninput="saturation_input()" onchange="saturation_change()"></input></div></td>
                <td><div class='medium' id='saturation_value'></div></td>
            </tr>
            <tr>
                <td><div class='medium'>cycles:</div></td>
                <td><div> <input style='width:100%;' id='cycles'class='slider' type="range"  min="1" max="100" value="10" oninput="cycles_input()" onchange="cycles_change()"></input></div></td>
                <td><div class='medium'  id='cycles_value'></div></td>
            </tr>
        </table>
        </div>
    </body>
    <script>
        update_status();
        update_devices();
        window.setInterval(update_devices, 10000);
        var color_picker = new iro.ColorPicker('#color-picker', {
            width: is_mobile_device() ? 600 : 300,
            layout: [
                { 
                    component: iro.ui.Wheel,
                },
                { 
                    component: iro.ui.Slider,
                    options: {
                        sliderType:'hue'
                    }
                },
                { 
                    component: iro.ui.Slider,
                    options: {
                        sliderType:'saturation'
                    }
                },
                { 
                    component: iro.ui.Slider,
                    options: {
                        sliderType:'value'
                    }
                },        
            ]
        });
    </script>
</html>